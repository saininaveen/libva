From: Petr Salinger <Petr.Salinger@seznam.cz>
Date: Wed, 16 Jan 2013 14:15:57 +0100
Subject: FTBFS_on_GNU-kFreeBSD

Bug-Debian: http://bugs.debian.org/612480
---
 va/va_backend.h     | 3 +++
 va/va_backend_tpi.h | 6 ++++++
 va/va_tpi.c         | 3 +++
 3 files changed, 12 insertions(+)

diff --git a/va/va_backend.h b/va/va_backend.h
index a0c408d..41b1214 100644
--- a/va/va_backend.h
+++ b/va/va_backend.h
@@ -30,7 +30,10 @@
 #define _VA_BACKEND_H_
 
 #include <va/va.h>
+
+#ifdef __linux__
 #include <linux/videodev2.h>
+#endif
 
 typedef struct VADriverContext *VADriverContextP;
 typedef struct VADisplayContext *VADisplayContextP;
diff --git a/va/va_backend_tpi.h b/va/va_backend_tpi.h
index 56998de..95cc0bd 100644
--- a/va/va_backend_tpi.h
+++ b/va/va_backend_tpi.h
@@ -32,7 +32,9 @@
 #include <va/va.h>
 #include <va/va_backend.h>
 
+#ifdef __linux__
 #include <linux/videodev2.h>
+#endif
 
 struct VADriverVTableTPI
 {
@@ -43,6 +45,8 @@ struct VADriverVTableTPI
 		VASurfaceID *surface		/* out */
 	);
     
+#ifdef __linux__
+
         VAStatus (*vaCreateSurfaceFromV4L2Buf) (
 		VADriverContextP ctx,
                 int v4l2_fd,         /* file descriptor of V4L2 device */
@@ -51,6 +55,8 @@ struct VADriverVTableTPI
                 VASurfaceID *surface	           /* out */
         );
 
+#endif
+
         VAStatus (*vaCreateSurfacesForUserPtr)(
 		VADriverContextP ctx,
                 int width,
diff --git a/va/va_tpi.c b/va/va_tpi.c
index e9169fc..036f6a5 100644
--- a/va/va_tpi.c
+++ b/va/va_tpi.c
@@ -66,6 +66,8 @@ VAStatus vaCreateSurfaceFromCIFrame (
   
 }
 
+#ifdef __linux__
+
 /* Wrap a V4L2 buffer as a VA surface, so that V4L2 camera, VA encode
  * can share the data without copy
  * The VA driver should query the camera device from v4l2_fd to see
@@ -98,6 +100,7 @@ VAStatus vaCreateSurfaceFromV4L2Buf(
       return VA_STATUS_ERROR_UNIMPLEMENTED;
 }
 
+#endif
 
 /*
  * The surfaces could be shared and accessed with extern devices
